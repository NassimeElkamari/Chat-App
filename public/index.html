<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Chat Rooms for Latest Technology</title>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link rel="stylesheet" href="./css/style.css">
    <script src="https://cdn.tailwindcss.com"></script>    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
</head>
<body>
    
    <div class='code'>
        <video autoplay muted preload loop id="video-background">
            <source src="./img/vd3.mp4" type="video/mp4">
        </video> 
        
            
       <header class='content' id="headerText">
            <h1 class='titleText' >Stay Updated on Tech Join Our Chat Rooms Now </h1>
            <p class='textTitle'><span id="typewriter"></span></p>
            
        </header>
        <button class="button" id="btnJoinOurChat">
            <span class="button_lg">
                <span class="button_sl"></span>
                <span class="button_text"><a href="form.html">join our chat</a></span>
            </span>
        </button>

        <!-- <footer class='footer'> -->
            <div  class="relative flex items-center justify-center h-screen mb-12 overflow-hidden ">
                <form data-aos="flip-left" data-aos-duration="1000" id="register" class="bg-clip-padding backdrop-filter backdrop-blur-md bg-opacity-20 z-10 bg-transparent hover:shadow-2xl p-9  flex flex-col items-center justify-center hidden" action="">
                   
                    <div >
                      <a href="./register.html"><button id="signbutton" type="button">sign in </button></a> 
                        <div class="m-6 font-mono text-4xl text-white">
                            <h1>Register Form</h1>
                        </div>
                        <div class="font-mono flex flex-col m-4">
                          <label class="p-2 text-2xl text-white"  for="name">Full Name:</label>
                          <input class="bg-transparent border border-gray-400 w-96 h-11 p-4 rounded-lg hover:bg-slate-100" type="text" id="fullname" placeholder="enter your full name">
                          
                            <label class="p-2 text-2xl text-white"  for="email">Email:</label>
                            <input class="bg-transparent border border-gray-400 w-96 h-11 p-4 rounded-lg hover:bg-slate-100" type="email" id="registerEmail" placeholder="name@example.com">
                            
                            <label class="p-2 text-2xl text-white"  for="password">Password:</label>
                            <input class=" bg-transparent border border-gray-400 h-11 p-4 rounded-lg hover:bg-slate-100" type="password" id="registerPassword" placeholder="********">
              
                            <label class="p-2 text-2xl text-white"  for="password">Conferm Password:</label>
                            <input class=" bg-transparent border border-gray-400 h-11 p-4 rounded-lg hover:bg-slate-100" type="cpassword" id="RegisterCpassword" placeholder="*******">
                            
                            <span class="p-2 text-blue-500">
                                <!-- <input class="m-2" type="checkbox">Forgot password -->
                            </span>
                
                            <div class="text-white bg-slate-400 h-9 opacity-45 rounded-lg flex items-center justify-center hover:opacity-100">
                              <button type="submit" >Register</button>
                            </div>

                            <div class="flex flex-row justify-between p-7 text-white z-20">
                                <button  class="signButton" type="button">Sign In</button>
                                <button><img class="w-5 h-5" src="" alt=""></button>
                           </div>
                        </div>
                    </div>
                </form>
                <form data-aos="flip-left" data-aos-duration="1000" id="login" class="bg-clip-padding backdrop-filter backdrop-blur-md bg-opacity-20 z-10 bg-transparent hover:shadow-2xl p-9 border border-gray-400 hover:rounded-lg flex flex-col items-center justify-center hidden" action="">
                   
                    <div>
                    <div class="m-6 font-mono text-4xl text-white">
                        <h1>Login Form</h1>
                    </div>
                    <div class="font-mono flex flex-col m-4">
                        <label id="labelEmail" class="p-2 text-2xl text-white"  for="email">Email:</label>
                        <input class="bg-transparent border border-gray-400 w-96 h-11 p-4 rounded-lg hover:bg-slate-100" type="email" id="email" placeholder="name@example.com">
                        
                        <label class="p-2 text-2xl text-white"  for="password">Password:</label>
                        <input class=" bg-transparent border border-gray-400 h-11 p-4 rounded-lg hover:bg-slate-100" type="password" id="password" placeholder="Password">
                        
                        <span class="p-2 text-blue-500">
                            <label class="m-2" id="forgetPassword">Forgot password</label>
                            <!-- <button><input id="forgetPassword" class="m-2" type="checkbox">Forgot password</button> -->
                        </span>
                        <div class=" text-white bg-slate-600 h-9 opacity-45 rounded-lg flex items-center justify-center hover:opacity-100">
                            <button type="submit"  id="buttonLogin">Login</button>
                        </div>
                        <button  ><img id="googleButton" class="w-7 h-7 " src="./img/free-google-1772223-1507807.webp" alt=""></button>

                        <div class ="flex items-center  justify-between">

                        <div class="w-40 my-8 border-t-2">  
                        </div >
                        <div class="">
                            <span class="text-white">
                                OU
                            </span>
                        </div>
                        <div class="w-40 my-8 border-t-2">    
                        </div>
                        
                    </div>
                    <div class="">
                        <p class= "ml-8 text-white">Dont hane any account?</p>
                    </div>
                        <div class="flex flex-row justify-between p-7 text-white z-20">
                            <!-- <p class="text-white">Dont hane any account?</p> -->

                            <button  class="signButton" type="button">Sign Up</button>
                       </div>
                    </div>
                </div>
                </form>

              
            </div>
            <!-- <a class='ripple'>Get Started now</a> -->
        <!-- </footer> -->
    
        
    </div>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

    <script>
        AOS.init();
      </script>
<script src="./js/index.js"></script>

  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
    import { getDatabase ,set, get ,ref, child } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js";
    import { getAuth , signInWithEmailAndPassword ,createUserWithEmailAndPassword,sendPasswordResetEmail, GoogleAuthProvider , signInWithPopup} from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";

    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
  
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
        apiKey: "AIzaSyA5p42Lww_eEJooeU1G_D3go5AjbLOui1Y",
        authDomain: "project2-cfc02.firebaseapp.com",
        projectId: "project2-cfc02",
        storageBucket: "project2-cfc02.appspot.com",
        messagingSenderId: "800498930483",
        appId: "1:800498930483:web:eb02d10b403ad428826446"
        };

  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getDatabase();
    const auth = getAuth(app);
    const dbref = ref(db);
    const provider = new GoogleAuthProvider();

    let EmailInp = document.getElementById("email");
    let PassInp = document.getElementById("password");
    let RegisterEmailInp = document.getElementById("registerEmail");
    let RegisterPassInp = document.getElementById("registerPassword");
    let fname = document.getElementById("fullname");
    let forgetPassword = document.getElementById("forgetPassword");
    let googleButton = document.getElementById("googleButton");

    let login = document.getElementById("login");
    let register = document.getElementById("register");


    let signInUser = e => {
        e.preventDefault();
        signInWithEmailAndPassword(auth,EmailInp.value ,PassInp.value)
        .then((Credential) =>{
            get(child(dbref,'UserAuthList/', +  Credential.user.uid))
            .then((snapchot) =>{
                if(snapchot.exists){
                    sessionStorage.setItem("user-info",JSON.stringify({
                        firstname:snapchot.val().fname,

                    }))
                    sessionStorage.setItem("user-info", JSON.stringify(Credential.user));
                    window.location.href = 'chat.html';
                }
            })
        })
        .catch((error)=>{
            alert(error.message);
        })

    }
    login.addEventListener('submit', signInUser);

    let registerUser = e => {
        e.preventDefault();
        createUserWithEmailAndPassword(auth,RegisterEmailInp.value ,RegisterPassInp.value)
        .then((Credential) =>{
            set(ref(db,'UserAuthList/', +  Credential.user.uid),{
                firstname:fname.value,
            });
            alert("User created successfully!");            
        })
        .catch((error)=>{
            alert(error.message);
        })

    }
    register.addEventListener('submit', registerUser);

    let ForgetPassword = ()=>{
        sendPasswordResetEmail(auth,EmailInp.value)
        .then(()=>{
            alert("Check your Email !!");
        })
        .catch((error)=>{
            alert("Problem in sending Email !!");
        })
    }
    forgetPassword.addEventListener('click',ForgetPassword);


    googleButton.addEventListener("click" , function(){
    signInWithPopup(auth, provider)
    .then((result) => {
      const credential = GoogleAuthProvider.credentialFromResult(result);
      const user = result.user;
      const userData = {
      displayName: user.displayName,
      email: user.email,
    };
    localStorage.setItem('userData', JSON.stringify(userData));
      window.location.href = "chat.html"
    }).catch((error) => {
      const errorCode = error.code;
      const errorMessage = error.message;
    });

  });


  const video = document.querySelector('video');

    video.addEventListener('ended', function() {
    this.currentTime = 0;
    this.play();
    });


  </script>

  <script type="text/javascript">
    document.onmousemove = animateCircles;

var colors = ['#67057a' , "#130175" , '#eba13a']

function animateCircles(event){
    var circle = document.createElement("div");
    circle.setAttribute("class" , "circle");
    document.body.appendChild(circle);

    circle.style.left = event.clientX + 'px';
    circle.style.top = event.clientY + 'px';

    var color = colors[Math.floor(Math.random() * colors.length)];
    circle.style.borderColor = color ;

    circle.style.transition = "all 0.5s linear 0s";

    circle.style.left = circle.offsetLeft - 20 + 'px';
    circle.style.top = circle.offsetTop - 20 + 'px';

    circle.style.width = "50px";
    circle.style.height = "50px";
    circle.style.borderWidth = "5px";
    circle.style.opacity = 0;

}
  </script>
</body>
</html>
